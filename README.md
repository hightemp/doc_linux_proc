# docs_linux_proc

Описание папки proc.

## Оглавление

- **/proc**
  - []()
  
## Источники

- https://web.mit.edu/rhel-doc/5/RHEL-5-manual/Deployment_Guide-en-US/ch-proc.html

## Описание

Ядро Linux имеет две основные функции: контролировать доступ к физическим устройствам на компьютере и планировать, когда и как процессы взаимодействуют с этими устройствами. Каталог /proc/ , также называемый файловой системой proc , содержит иерархию специальных файлов, представляющих текущее состояние ядра, что позволяет приложениям и пользователям заглянуть в представление ядра о системе.

В каталоге /proc/ можно найти огромное количество информации о системном оборудовании и любых запущенных процессах. Кроме того, пользователи и приложения могут манипулировать некоторыми файлами в дереве каталогов /proc/ , чтобы сообщать об изменениях конфигурации ядру.

### 3.1. Виртуальная файловая система

В Linux все данные хранятся в виде файлов. Большинство пользователей знакомы с двумя основными типами файлов: текстовыми и двоичными. Но каталог /proc/ содержит файл другого типа, называемый виртуальным файлом . Именно по этой причине /proc/ часто называют виртуальной файловой системой .

Эти виртуальные файлы обладают уникальными качествами. Размер большинства из них равен нулю, но при просмотре одного из них может содержаться большой объем информации. Кроме того, большинство настроек времени и даты в виртуальных файлах отражают текущее время и дату, что свидетельствует о том, что они постоянно обновляются.

Виртуальные файлы, такие как /proc/interrupts , /proc/meminfo , / proc/mounts и /proc/partitions , дают представление об аппаратном обеспечении системы на данный момент. Другие, такие как файл /proc/filesystems и каталог /proc/sys/ , предоставляют информацию о конфигурации системы и интерфейсы.

В организационных целях файлы, содержащие информацию по похожей теме, сгруппированы в виртуальные каталоги и подкаталоги. Например, /proc/ide/ содержит информацию обо всех физических устройствах IDE. Точно так же каталоги процессов содержат информацию о каждом запущенном процессе в системе.

#### 3.1.1. Просмотр виртуальных файловая

Используя команды cat , more или less для файлов в каталоге /proc/ , пользователи могут получить немедленный доступ к огромному количеству информации о системе. Например, чтобы отобразить тип ЦП компьютера, введите cat /proc/cpuinfo , чтобы получить вывод, подобный следующему:

При просмотре различных виртуальных файлов в файловой системе /proc/ часть информации легко понятна, а часть не читается человеком. Отчасти поэтому существуют утилиты для извлечения данных из виртуальных файлов и их удобного отображения. Примеры этих утилит включают lspci , apm , free и top .

#### 3.1.2. Изменение виртуальных файловая

Как правило, большинство виртуальных файлов в каталоге /proc/ доступны только для чтения. Однако некоторые из них можно использовать для настройки параметров ядра. Это особенно верно для файлов в подкаталоге /proc/sys/ .

Чтобы изменить значение виртуального файла, используйте команду echo и символ «больше» ( > ), чтобы перенаправить новое значение в файл. Например, чтобы изменить имя хоста на лету, введите:

```
echo www.example.com > /proc/sys/kernel/hostname
```

Другие файлы действуют как двоичные или логические переключатели. Ввод cat /proc/sys/net/ipv4/ip_forward возвращает либо 0 , либо 1. 
0 указывает, что ядро не пересылает сетевые пакеты . Использование команды echo для изменения значения файла ip_forward на 1 немедленно включает пересылку пакетов.

### 3.2. Файлы верхнего уровня в файловой системе proc

Ниже приведен список наиболее полезных виртуальных файлов верхнего уровня каталога /proc/ .

#### 3.2.1. /proc/apm

Этот файл предоставляет информацию о состоянии системы Advanced Power Management (APM) и используется командой apm . Если система без батареи подключена к источнику питания переменного тока, этот виртуальный файл будет выглядеть следующим образом:

```
1.16 1.2 0x07 0x01 0xff 0x80 -1% -1 ?
```

Выполнение команды apm -v в такой системе приводит к выводу, подобному следующему:

```
APM BIOS 1.2 (kernel driver 1.16ac) AC on-line, no system battery
```

Для систем, которые не используют батарею в качестве источника питания, apm может сделать немного больше, чем перевести машину в режим ожидания. Команда apm гораздо полезнее на ноутбуках. Например, следующий вывод получен командой cat /proc/apm на ноутбуке, подключенном к розетке:

```
1.16 1.2 0x03 0x01 0x03 0x09 100% -1 ?
```

Когда тот же ноутбук отключается от источника питания на несколько минут, содержимое файла apm изменяется примерно на следующее:

```
1.16 1.2 0x03 0x00 0x00 0x01 99% 1792 min
```

Команда apm -v теперь дает больше полезных данных, таких как следующие:

```
APM BIOS 1.2 (kernel driver 1.16) AC off-line, battery status high: 99% (1 day, 5:52)
```

#### 3.2.2. /proc/buddyinfo

Этот файл используется в основном для диагностики проблем с фрагментацией памяти. Используя алгоритм напарника, каждый столбец представляет собой количество страниц определенного порядка (определенного размера), доступных в любой момент времени. Например, для зоны DMA (прямой доступ к памяти) имеется 90 блоков памяти размером 2^(0*PAGE_SIZE). Точно так же доступно 6 блоков памяти размером 2^(1*PAGE_SIZE) и 2 блока памяти размером 2^(2*PAGE_SIZE).

Строка DMA ссылается на первые 16 МБ в системе, строка HighMem ссылается на всю память более 4 ГБ в системе, а строка Normal ссылается на всю память между ними.

Ниже приведен пример вывода, типичного для /proc/buddyinfo :

```
Node 0, zone      DMA     90      6      2      1      1      ... 
Node 0, zone   Normal   1650    310      5      0      0      ... 
Node 0, zone  HighMem      2      0      0      1      1      ...
```

#### 3.2.3. /proc/cmdline

Этот файл показывает параметры, переданные ядру во время его запуска. Пример файла /proc/cmdline выглядит следующим образом:

```
ro root=/dev/VolGroup00/LogVol00 rhgb quiet 3
```

Это говорит нам о том, что ядро смонтировано только для чтения (обозначается (ro) ), расположено на первом логическом томе ( LogVol00 ) первой группы томов ( /dev/VolGroup00 ). LogVol00 является эквивалентом раздела диска в системе, отличной от LVM (управление логическими томами), точно так же, как /dev/VolGroup00 похож по концепции на /dev/hda1 , но гораздо более расширяем.

Для получения дополнительной информации о LVM, используемом в Red Hat Enterprise Linux, обратитесь к http://www.tldp.org/HOWTO/LVM-HOWTO/index.html .

Затем rhgb сигнализирует, что пакет rhgb установлен и графическая загрузка поддерживается, при условии, что /etc/inittab показывает уровень выполнения по умолчанию, установленный на id:5:initdefault: .

Наконец, тихо указывает, что все подробные сообщения ядра подавляются во время загрузки.

